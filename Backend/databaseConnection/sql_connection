const env = process.env.NODE_ENV || 'development3';
const Sequelize = require("sequelize");

const sequelize = new Sequelize(process.env.database, process.env.user_name, process.env.password, {
    host: process.env.host,
    dialect: process.env.dialect,
    dialectOptions: {
        options: {
            validateBulkLoadParameters: true,
            trustServerCertificate: true,
            useUTC: false,
            timezone: process.env.TZ,
            requestTimeout: 3000000,
            connectTimeout: 60000
        }
    },
    timezone: process.env.TZ,
    pool: {
        max: 100,
        min: 0,
        idle: 100000,
        acquire:9000000
    },
    logging: false,
});

sequelize.authenticate().then(function (err) {
    if (err) console.log(`Unable to connect to the ${config.dialect} database:`, err);
    console.log(`${process.env.database}` + ' Connection has been established successfully.');
});

module.exports.sequelize = sequelize;

